  var poly;
  var map;
  var hoods;
  var schools;
  var hood_polies = [] 
  var city_polies = [] 
  var display = true;

  function initialize() {
    var duluth = new google.maps.LatLng(34.0036956139944, -84.14257274609372);
    var myOptions = {
      zoom: 13,
      center: duluth,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

    schools = {
      0: { 
       name: 'Harris ES',
       color: "#00FF00",
       position: new google.maps.LatLng(33.987044, -84.134333),
       parent: 5,
      },
      1: { 
       name: 'Mason ES',
       color: "#FF0000",
       position: new google.maps.LatLng(33.998857, -84.11959),
       parent: 7,
      },
      2: { 
       name: 'Chesney ES',
       color: "#66CCFF",
       position: new google.maps.LatLng(33.9604821, -84.1472781),
       parent: 5,
      },
      3: { 
       name: 'Berkeley Lake ES',
       color: "#3366CC",
       position: new google.maps.LatLng(33.977799, -84.186838),
       parent: 5,
      },
      4: { 
       name: 'Chattahoochie ES',
       color: "#FFFF8F",
       position: new google.maps.LatLng(34.017761, -84.147691),
       parent: 5,
      },
      5: { 
       name: 'Duluth MS',
       color: "#FFFFCC",
       position: new google.maps.LatLng(33.9838012, -84.1580857),
       parent: 6,
      },
      6: { 
       name: 'Duluth HS',
       color: "#FFFFCC",
       position: new google.maps.LatLng(34.009182, -84.144709),
       parent: null,
      },
      7: { 
       name: 'Hull MS',
       color: "#FFFFCC",
       position: new google.maps.LatLng(34.014501, -84.103997),
       parent: 8,
      },
      8: { 
       name: 'Ptree Ridge HS',
       color: "#FFFFCC",
       position: new google.maps.LatLng(34.0121277, -84.0916348),
       parent: null,
      },
      9: { 
       name: 'Burnette ES',
       color: "#00FF00",
       position: new google.maps.LatLng(34.031062, -84.064444),
       parent: 7,
      },
      10: { 
       name: 'Jackson ES',
       color: "#FFFF8F",
       position: new google.maps.LatLng(33.9878514, -84.0591835),
       parent: 7,
      },
      11: { 
       name: 'Parsons ES',
       color: "#3366CC",
       position: new google.maps.LatLng(34.0135009, -84.0930967),
       parent: 7,
      },
    }

    hoods = {
            0: {name: 'Bromolow',
                path: 'w{gnEpts`O{C_AgAmC_Aw@cAqEcHwG{BcAuCCcEbCeLtH_ArDvB~I_OdKqBdEcAnFqFz_@lCh@BgJnb@wX_DoJ`GgDnBfAh@YxC`L~DbPvAB|X{QqDkD{AwDcBuJ?]',
                schoolId: 0,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            1: {name: 'Harris Main',
                path: 'ybinEf_s`OtAuHcJiR{GeIaOcf@w@qFbBgJkHyYxPoMtAgCeZgdAg]ya@eMha@qJvQkDbW_C|ScVxQuYhRcZvQyLbOqNjSxXbWpVjSnKvIhTxC`[bHhh@bcA`OvIrEoM|GePhL{ZfM_FmCmMtIyJ',
                schoolId: 0,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            2: {name: 'Mall',
                path: 'ktinEbuq`O_Oej@lAsKuGwXpRoQuYifAg]ka@pBwQtEoBtSgCbVgF`_@_U`DjHbHvMrP`l@lWps@nSri@as@nc@aYp`@uWfY',
                schoolId: 1,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            3: {name: 'Mall Triangle',
                path: '{lknE`tj`OlAwk@pBcm@xDqYvNpCrXnQbNhRpHzOdC~T{]dToq@jM',
                schoolId: 1,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            4: {name: 'Kroger',
                path: 'qkfnE~vn`O_t@jb@yp@pz@pVlc@rRhClCzKhHjDbJbWrZ~[`k@qs@f]_Uq_AadC',
                schoolId: 2,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            5: {name: 'Inverloch',
                path: 'olgnEzmt`Ou]nToKq]{CyBmChClCvIac@jZ\fJcFmAgEpGyFjG|Wf`@pD{CtCdAtCnFla@eTrVwMsJe[NaDdIsDfKeEpDmAb@?yJcH',
                schoolId: 2,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            6: {name: 'Simpson Cir',
                path: 'oyinEbiw`ObJ_Fvy@{a@gIu_@nWiJvPhRnK|Z}Sdu@~BfJev@tf@ui@abA',
                schoolId: 3,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            7: {name: 'Berkeley',
                path: 'kzinEriw`Okl@iw@qF{K}_@tWjDxJkLrHqJkDMqNyLfBeMr@gQkDuM?gMvBu]jLwLnc@mG~Th`@bAno@d_@bNt^vHpVxHz~@gMlEiH}LkHwI_O~EfIdQj`@tWt]|StQNl[uIxt@{Rw@}LdAiRiDkLMcH~NuHtMyJpFuApNoF|CqNdAcHa_A{|A',
                schoolId: 3,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            8: {name: 'Chattahoochie',
                path: 'wdqnErfx`O~Rmx@pf@uPfU?vPzDr^mELbOvHjDtI_FmC{Kj`@eXc`@{p@yH}Dqf@}EcPcHcTsRqXyY}KsSgUmb@_ImMmaAs|AkJfFaBbA}Iz@{CxJuOQw@a@u]tL?rZbJph@dAnQfEnXMbb@qBb^iBlIqHhNMvBnHpNnIlTpDvc@hLjKtSvQte@xN~RjHpb@xF',
                schoolId: 4,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            9: {name: 'Mason Main',
                path: 'eapnE~gq`O}g@ucAmcAg{Apf@}i@bJ}SvHu_@bJcO|c@oUrYgQxLgJpRQfQ}LfIuP~BwIfaA~c@gEd_@aBzh@uAvv@gIrV{GjSuExJwD~IuAdPqBdTiB~BgUpRqRfM}WpNeAXyHvJ{X`]',
                schoolId: 1,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            10: {name: 'Parson Main',
                path: 'kgmnEjve`O{_@cOwaAyo@wPiKuQoMmGhRuErGgQrAuMrGmAbAcFqC{KnFuCgCmQdIcF|AmKh@iHxBmE~FkBdI[bHmAdEwBjHqDxCZdLZ~BMnFbBtAy@lEi@fFq@~BMhGyDlH`CVlAtDk@bHnUvMrIpGbF|EbJ~[vDnMxDfNhHzNxD`KvTeT|M}OrGeIbHmPjDgN`DcStGiJ|QcLrSiKjRuLhTwM`G{@vHX~BeAjJkHhPg\Cg@',
                schoolId: 11,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            11: {name: 'Burnette Main',
                path: 'ydunE|a_`O}WlTtI~[g]bm@jThCui@|j@yPzYsQre@_GvXqRrW{G`]lSpUlCvJZ~LlK|TpNdW~J~MbNvBlG`GpRbm@p^oM~Pj@~DiJlIkAxJuHqLwXyVyz@{GyG{]}Sd@sI{@oCiCc@MY~DkHDmGxCeP}AkAFaG[kBQmMlCoBzEuNJmGnBwIfCkDlHyEjNmAhL_EhK_FtCzBbLcFbFpCdJkFnDiBzPmApE{FtGaRga@uYuTiP{[cb@u^{h@MG',
                schoolId: 9,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
            12: {name: 'Jackson Main',
                path: '_iinErch`O~VcOzOsjDfMy`CtAio@cNgo@oc@}uAiD`NhDjSuIxh@{_@nTkL?kTbP{WhRyXhC_Wwg@ag@nU_OhReMxJ}_@lEgMnFmk@bOcf@b|@z_@nc@|w@jq@n{@pd@bv@nc@|WhRjt@jStq@b^zLvXMA',
                schoolId: 10,
                students: {
                       es: 128, 
                       ms: 100,
                       hs: 100},
               },
    }

    cities = {
      0: {
        name: 'Duluth',
        path: 'aatnEtts`Oe]bDuKvBuIhGzAxCxFrKzCvMzAjLSlLdCfFlEpG|IpGrElE|GdE~PpGpR|DlKdEpJnChTpC|MdEzO`@pJa@fM`@vJlE`GdErKqG|O_JlMuHbHaD?qCp@kDdCyFxD}EfEyCrE_FbFqC~D_CpDwBtCrH{AlAZbHlCNTeBxNwIk@_ClKyFbDkA_AoB_Cz@_CQeCdA}Az@_C{Gc@Po@wBv@k@v@j@x@FtIqNb@uA`@Y|AyClUcO~LkHpJqGsEyNhPyJwLu[rK{GcFeMa@YcBjAgAuAlAeBqDuHwJrGbD`K`@rDw@qCqFtHzAxCmGfJfEzGmArDuCtEyBlAmEfCuCtAsAz@gA~E{AiGmG`DzEfQLnBw@dEcB|AmAz@}ClEqDmIjFwEDtHp@GlCyBp@}AwFkWq@s@qHpCyBbAqD_CeCs@_Cz@qDaDyHcDpFkDbHvIhFtA~B`@fIuAuAsDoBz@kHcSyJhGeMmIlCoBqD_JmCzD}E\\a@dArA?m@rFp@GEtAkACIxC_CJ{D}Ak@tCeIiBN_F_DhCwEgB~AiGvBkFjBmAp@v@v@e@z@bFxFeGq@sDt@w@KyCf@MtEzEHw@zANPoDmH{B^s@Ym@\\o@PoBQSDaAMCbA{@PiB_D~@_AXgCBiAa@kAbAaAv@g@FHwBtAgAMo@zG]tAGf@a@^yB^wFRqCt@oDcE?iA}CmHzBaAa@e@NG~@wAf@cDwIFi@cDsIvBgA|BlGlGw@mAwBpBaBk@s@lD{Bb@l@bAw@iBiEhDiB{@wBvA{@f@dB~BkB{@}CpBmAv@dC~GwFqD_QuN`EcIp@sF{O_FdEyE_J_EQyAv@{AcDcB~AW?gGnD[UWv@kA\\cDoIbAi@c@kBeBz@_CcGdHeEfGmCtCa@vDuAfF]q@yFbBsDqLoLg@bCStC_AhA}BlGwJsFmJcFoBrFe@xFgCoD_ItCcG|C{BpAwAtA}@zBiBzBgHrG|C|EoBhCfDlElAyAxLXP_BkAwD~Bs@|@fB?jBY|CuA~BmB~AsB|AkAvBw@|A}BbAoCqGcLcSqDtAuEhAu@BIzFzLxUsApAcDcFcA}AiC}AcCoBpAsD_HyJiLiOjDa@oPgYsE{K~MuHhPh[pYePeA{B_BwGgF}WpAsByByG{H~BiMvDgBf@cVvHcHsS_FdBiCmOuC}JcH_\\sFo\\{EdBgE`CGtE{ApCcDtAaFPc@|E~JnFvJfFxDjDdErDtCbDpBbHbDzKdCpKfCpJ{GpCvVlX_CzCeEp@k@yCwBr@gCpCStEhDvB_AxFyD`GmMVjBbHnBpJb@hGbBrKF|AyVtE~@dEfEr@`BV[fB{CXw@XrAtE_OvFb@rGD|Ej@|HrAdE~@jH`AfJDvIc@rKq@hOw@~Ii@`Gc@xClMmBpDuAvDYxD`@lCYtIlAv@CzDc@fFm@xDa@v@IfQyL`DC|CoBpJkFd@z@s@v@hBxF{@XmB|CrAjD_GjJf@dEcCTQxApA~@_FzBmCaG_BfB~ClGbAj@~@~FqAHy@fC{FLf@`@uC|AdBzGe@X{C_Bv@aKGa@b@w@SYz@{BgAwBbBoDuBiK_F~BiE~@cDhAcDtAkDhAA?'
      }
    }

    pts = [[34.02272711445787, -84.15579067211911], [34.027564348483075, -84.15660606365964], [34.02959163662795, -84.15720687847897], [34.031298789076594, -84.15853725415036], [34.03083643868003, -84.15930973034665], [34.02959163662795, -84.16132675152585], [34.028809180276454, -84.16368709545895], [34.02834681631358, -84.16583286267087], [34.028453515913256, -84.16797862988278], [34.02777774951606, -84.16913734417722], [34.026746306218335, -84.17051063519284], [34.02500349422736, -84.17188392620847], [34.02393644881289, -84.17291389447018], [34.02251370072409, -84.17390094738766], [34.01963256279535, -84.17527423840329], [34.016502326798005, -84.17621837597653], [34.014510298337726, -84.17720542889401], [34.012660515771806, -84.17793498974606], [34.00924542669274, -84.17866455059811], [34.00686189772411, -84.1796516035156], [34.004158112238336, -84.17982326489255], [34.00230810415181, -84.1796516035156], [34.00003111580508, -84.17982326489255], [33.99814543862736, -84.18085323315427], [33.99686457742697, -84.18184028607175], [33.99483650769773, -84.18046699505612], [33.99213233941748, -84.17870746594235], [33.989819495634656, -84.17716251354977], [33.9883605925638, -84.17634712200925], [33.9883605925638, -84.1756175611572], [33.9881115090486, -84.17475925427243], [33.98743542154149, -84.17351470928952], [33.98651024044738, -84.17239891033933], [33.9855138803132, -84.17162643414304], [33.98444633863607, -84.17051063519284], [33.983307612734514, -84.16978107434079], [33.982346800888564, -84.16913734417722], [33.9814571506067, -84.16853652935788], [33.98070983717428, -84.17008148175046], [33.98117246054999, -84.1704677198486], [33.981030115164096, -84.1719268415527], [33.98031838465909, -84.17201267224118], [33.98021162456936, -84.17149768811032], [33.977684929977016, -84.16978107434079], [33.97789845636866, -84.16913734417722], [33.97590552252418, -84.1678927991943], [33.975086982590014, -84.16750656109616], [33.975407281763616, -84.16694866162106], [33.97604787649092, -84.16724906903073], [33.976688466391685, -84.16716323834225], [33.977364639383985, -84.16750656109616], [33.97782728096438, -84.16780696850583], [33.978467857457844, -84.16639076214597], [33.978645794516076, -84.16647659283444], [33.97889490577195, -84.1658757780151], [33.97861020713423, -84.16566120129391], [33.97832550754306, -84.1658757780151], [33.978040806998486, -84.16591869335934], [33.976332583709336, -84.16342960339352], [33.97615464180956, -84.16300044995114], [33.97597669953734, -84.16287170391843], [33.97551404788668, -84.16209922772214], [33.971919514688175, -84.15952430706784], [33.96967730316619, -84.1580222700195], [33.96782654435672, -84.15664897900388], [33.96889429473915, -84.15411697369382], [33.96611811586147, -84.15222869854733], [33.96832482953679, -84.14763675671384], [33.96629607876426, -84.14622055035397], [33.967435032524335, -84.14394603710934], [33.96761299267157, -84.14381729107663], [33.96811127910282, -84.14420352917477], [33.96846719619485, -84.14377437573239], [33.968075687311675, -84.14325939160153], [33.96896547762133, -84.14171443920895], [33.97085180228915, -84.14308773022458], [33.97003321370432, -84.1450189207153], [33.96985525862144, -84.1459201429443], [33.970139986575276, -84.14519058209225], [33.97135006974368, -84.14673553448483], [33.97088739291844, -84.14750801068112], [33.972239825793665, -84.14931045513913], [33.97124329839206, -84.150726661499], [33.97163479269259, -84.151627883728], [33.9723821858977, -84.15270076733395], [33.97298721368091, -84.1530870054321], [33.97401930996359, -84.15377365093991], [33.97476668220981, -84.1542028043823], [33.97519374911528, -84.15450321179196], [33.975549636564566, -84.15561901074216], [33.97601228802157, -84.15428863507077], [33.977364639383985, -84.1551040266113], [33.976261406994126, -84.1580222700195], [33.97619023021931, -84.1585801694946], [33.976474936961054, -84.15956722241208], [33.97697317146496, -84.1600392911987], [33.977364639383985, -84.16033969860837], [33.97814756981444, -84.16136966687009], [33.97903725473328, -84.1596959684448], [33.977862868673974, -84.15862308483884], [33.97782728096438, -84.16016803723141], [33.97757816658009, -84.16012512188718], [33.9768664071742, -84.15952430706784], [33.97661728997438, -84.15905223828122], [33.977862868673974, -84.15514694195554], [33.97811198222402, -84.1548894498901], [33.979642235159766, -84.15561901074216], [33.98024721128085, -84.15596233349606], [33.98113687422587, -84.15531860333249], [33.98181301183679, -84.15506111126706], [33.98245355829666, -84.15536151867673], [33.98334319814984, -84.1545461271362], [33.9849089416758, -84.15373073559567], [33.98369905148394, -84.15287242871091], [33.98224004334638, -84.15458904248044], [33.9810657015329, -84.15501819592282], [33.980425144614735, -84.15518985729977], [33.97878814389454, -84.15476070385739], [33.979215190599774, -84.15385948162839], [33.979784582869705, -84.15415988903806], [33.981279219433, -84.15094123822018], [33.98316527092412, -84.15227161389157], [33.985442711285216, -84.15059791546628], [33.984731017727725, -84.15004001599118], [33.985620633743416, -84.14828048687741], [33.986332319851535, -84.14922462445065], [33.98743542154243, -84.14937482815549], [33.98761333982893, -84.1497181509094], [33.98718633531556, -84.1497181509094], [33.987417629693304, -84.15094123822018], [33.98716854341428, -84.15089832287595], [33.98720412721311, -84.15132747631833], [33.98757775620141, -84.15130601864621], [33.987631131637094, -84.1520784948425], [33.98827163425024, -84.15214286785886], [33.98921458764569, -84.15167079907224], [33.98942808507498, -84.1524218175964], [33.99106488087956, -84.15188537579343], [33.99097592539601, -84.15076957684323], [33.99177652139547, -84.15145622235104], [33.99286176170731, -84.15094123822018], [33.99238141114793, -84.1496108625488], [33.99177652139547, -84.14843069058225], [33.99124279156729, -84.1480444524841], [33.99099371650017, -84.14832340222165], [33.990709058386614, -84.14813028317258], [33.9904066080961, -84.14926753979489], [33.989161213204554, -84.14795862179562], [33.98941029364304, -84.14705739956662], [33.98914342171673, -84.14677844982907], [33.98919679616904, -84.14600597363278], [33.98900108968003, -84.14594160061642], [33.987933591805955, -84.1470359418945], [33.987880216560264, -84.14675699215695], [33.987417629693304, -84.14684282284543], [33.98732867039173, -84.14596305828854], [33.98884096585376, -84.14534078579709], [33.9886808417258, -84.14508329373166], [33.988805382740296, -84.14484725933835], [33.988663050137404, -84.14461122494504], [33.98857409213953, -84.14405332546994], [33.988663050137404, -84.14394603710934], [33.98862746694943, -84.14362417202756], [33.988698633310456, -84.14360271435544], [33.98836059256472, -84.14330230694577], [33.98827163425024, -84.14276586514279], [33.98907225572819, -84.14308773022458], [33.98939250220736, -84.1432164762573], [33.99006857414456, -84.14323793392941], [33.990442190539106, -84.14306627255246], [33.990815805290936, -84.14340959530637], [33.99115383626999, -84.14368854504391], [33.99134953780112, -84.14373146038815], [33.99129616470096, -84.14313064556882], [33.99086917869282, -84.14276586514279], [33.990940343176504, -84.14252983074948], [33.98951704217888, -84.14237962704465], [33.98909004723092, -84.14233671170041], [33.98889434049604, -84.14216505032346], [33.98873421646863, -84.14156423550412], [33.98857409213953, -84.14031969052121], [33.98846734241917, -84.13959012966916], [33.98820046753162, -84.13871036511227], [33.98917900468868, -84.13871036511227], [33.98955262499437, -84.13791643124387], [33.99106488087956, -84.13853870373532], [33.991385119849255, -84.13836704235837], [33.991580820847716, -84.13845287304684], [33.991616402799, -84.13877473812863], [33.992061175933024, -84.1389678571777], [33.9928795524166, -84.13725124340817], [33.99284397099425, -84.13703666668698], [33.9936623399383, -84.13534151058957], [33.993057459304815, -84.13497673016354], [33.99243478356639, -84.13632856350705], [33.9910826719651, -84.1360496137695], [33.99147407490445, -84.13544879895016], [33.99090476094212, -84.13495527249142], [33.991118254124984, -84.134697780426], [33.990246486918245, -84.13407550793454], [33.99006857414456, -84.13431154232785], [33.9897305388483, -84.1340325925903], [33.990264278175125, -84.1330240820007], [33.98941029364304, -84.13248764019772], [33.989712747479665, -84.13188682537839], [33.98926796205331, -84.13158641796872], [33.98907225572819, -84.13210140209958], [33.98843175914924, -84.1315649602966], [33.98873421646863, -84.13077102642819], [33.988164884149946, -84.13038478833005], [33.987880216560264, -84.13104997616574], [33.98643907225466, -84.12980543118283], [33.98732867039173, -84.12693010311887], [33.989837286981846, -84.12789569836423], [33.991456283900845, -84.12815319042966], [33.99268385440934, -84.12544952374265], [33.99380466416742, -84.12643657666013], [33.99488987857494, -84.12467704754636], [33.99585054861492, -84.12459121685788], [33.99629529958439, -84.12487016659543], [33.99675783812282, -84.1240547750549], [33.997255953732484, -84.12452684384152], [33.99738048217857, -84.12452684384152], [33.998696914586496, -84.12540660839841], [33.998839230381655, -84.12529932003781], [33.99896375650683, -84.12557826977536], [33.999337333787096, -84.1257284734802], [34.000155640183955, -84.1240547750549], [33.99981764501909, -84.12384019833371], [33.99999553737879, -84.12330375653073], [34.0005114231151, -84.1236041639404], [34.001151828635884, -84.12229524594113], [33.99967533086311, -84.12130819302365], [33.99835891361743, -84.12060008984372], [33.99761174880841, -84.12042842846677], [33.996686678511594, -84.11999927502438], [33.99553032647522, -84.11984907131955], [33.99577938824374, -84.11860452633664], [33.99528126397656, -84.11770330410764], [33.99745164120865, -84.1155360792236], [33.99764732823404, -84.1162012670593], [33.99775406642153, -84.11695228558347], [33.99807428017935, -84.11731706600949], [33.998696914586496, -84.118668899353], [34.000582579522515, -84.1174458120422], [34.00241483648382, -84.11630855541989], [34.002966284724494, -84.11753164273068], [34.00316195904604, -84.11877618771359], [34.0038379214156, -84.11789642315671], [34.00543886346263, -84.11864744168088], [34.00673738317902, -84.11944137554929], [34.00735995408349, -84.11984907131955], [34.00780464479229, -84.12027822476193], [34.00810703314417, -84.12090049725339], [34.008640657020706, -84.12152276974484], [34.01011699893981, -84.12289606076047], [34.00933436304702, -84.12401185971066], [34.00988576635862, -84.12469850521848], [34.009049766388465, -84.1257284734802], [34.00865844442551, -84.12527786236569], [34.00645277781685, -84.12540660839841], [34.00636383844558, -84.12493453961179], [34.00673738317902, -84.12401185971066], [34.00609701977285, -84.12375436764523], [34.00579462426371, -84.12426935177609], [34.00579462426371, -84.12480579357907], [34.005919140192, -84.12559972744748], [34.00634605056013, -84.12624345761105], [34.0068974732761, -84.12671552639767], [34.007484467716694, -84.1271875951843], [34.007858007520866, -84.12778841000363], [34.008142608173586, -84.12826047879025], [34.00876516877606, -84.12860380154416], [34.0094944482483, -84.12723051052853], [34.01159331519061, -84.12401185971066], [34.01248264994056, -84.12444101315305], [34.01354983934434, -84.12480579357907], [34.01381663459935, -84.12482725125119], [34.01386999354974, -84.12609325390622], [34.0116466755383, -84.12974105816647], [34.01207355711255, -84.13014875393674], [34.0128917407975, -84.12901149731442], [34.01322968393171, -84.1285394285278], [34.01392335246659, -84.12806735974118], [34.014581443017086, -84.12750946026608], [34.01417236030184, -84.12660823803708], [34.01561303415488, -84.1247199628906], [34.01773842810099, -84.12211285572812], [34.01688471977257, -84.12194119435117], [34.019677025545164, -84.11773549061581], [34.02074412451117, -84.11567555409238], [34.01834313297238, -84.1141306016998], [34.01556856927896, -84.11865817051694], [34.01131761952751, -84.11591158848569], [34.01167335570041, -84.11528931599423], [34.01215359716961, -84.11389456730649], [34.01330972289889, -84.10990344029233], [34.01290063405593, -84.10932408314511], [34.013505373387844, -84.10790787678525], [34.01508834712618, -84.10855160694882], [34.01738271734085, -84.10947428684995], [34.01789849745675, -84.10966740589902], [34.021597794024814, -84.11123381596371], [34.02305612624786, -84.10792933445737], [34.02417653520261, -84.10844431858823], [34.024870114286024, -84.10580502491757], [34.025617039267374, -84.10389529209897], [34.027075302426766, -84.09926043492123], [34.028302358109514, -84.09453974705502], [34.02940491474707, -84.09505473118588], [34.030400760041225, -84.09569846134946], [34.0304363257284, -84.09677134495541], [34.030898678305306, -84.09750090580746], [34.031716680538516, -84.09793005924985], [34.03285475748269, -84.09801588993832], [34.033032580626156, -84.09913168888852], [34.03111207095254, -84.10033331852719], [34.02922708400035, -84.10149203282162], [34.028302358109514, -84.10235033970639], [34.02730648818759, -84.1032515619354], [34.026559578076224, -84.10406695347592], [34.02599049929308, -84.10552607518002], [34.025172441856434, -84.10758601170346], [34.02449664933037, -84.10960303288266], [34.02382085142295, -84.1114483926849], [34.025243577598744, -84.11217795353696], [34.021437731645314, -84.1162549112396], [34.022077979353355, -84.11702738743588], [34.02307391063281, -84.11728487950131], [34.02328732295794, -84.11651240330502], [34.023891988298196, -84.11676989537045], [34.02456778563918, -84.1174994562225], [34.02467448999056, -84.11857233982846], [34.02382085142295, -84.1191731546478], [34.02414096689201, -84.1204176996307], [34.02506573813115, -84.12170515995786], [34.02737762214103, -84.12183390599057], [34.02684411603669, -84.12329302769467], [34.02627503916168, -84.12513838749692], [34.02609720185561, -84.1264687631683], [34.02559925541594, -84.1284857843475], [34.02556368770129, -84.12895785313412], [34.02936934862754, -84.13003073674008], [34.02904925288092, -84.13101778965756], [34.028053391724725, -84.13127528172299], [34.02755545676378, -84.1314040277557], [34.02769772419362, -84.13191901188657], [34.02848019079426, -84.13204775791928], [34.02876472231462, -84.132176503952], [34.028337924676286, -84.13324938755795], [34.030898678305306, -84.13449393254086], [34.030720850689264, -84.13586722355649], [34.030685285121336, -84.13698302250668], [34.0304718914007, -84.1385708902435], [34.03004510234933, -84.13955794316098], [34.02972500915196, -84.14105998020932], [34.02940491474707, -84.14286242466733], [34.02936934862754, -84.14457903843686], [34.029547179076104, -84.14659605961606], [34.02979614107796, -84.1492138956146], [34.03008066818559, -84.15097342472836], [34.030294062890185, -84.15226088505551], [34.0304718914007, -84.1530333612518], [34.02816009169338, -84.1524754617767], [34.027270921188496, -84.15204630833432], [34.026346173979775, -84.1519175623016], [34.02542141669368, -84.15208922367856], [34.024710058077886, -84.15196047764584], [34.02300277307184, -84.15234671574399], [34.02271822223197, -84.15232525807187], [34.021775640759955, -84.15215359669492], [34.0206196303236, -84.1519175623016], [34.019694810638384, -84.15174590092465], [34.019410248708034, -84.15170298558041], [34.01649343391994, -84.14949284535214], [34.015675284944535, -84.14947138768002], [34.0148927002857, -84.14891348820493], [34.01304292605148, -84.14773331623837], [34.012847274496835, -84.14803372364804], [34.013114071959556, -84.14831267338559], [34.01258047619572, -84.1495572183685], [34.01288284754031, -84.14968596440121], [34.01343422780818, -84.15047989826962], [34.01300735307508, -84.15133820515439], [34.01428797083559, -84.15316210728452], [34.014092322150084, -84.154149160202], [34.01475041139083, -84.15425644856259], [34.01483934197807, -84.1547070596771], [34.0144302605055, -84.15502892475888], [34.01555078332228, -84.15565119725034], [34.016262218704455, -84.15436373692319], [34.016742434216994, -84.15487872105405], [34.015942073520286, -84.15623055439755], [34.01560414118273, -84.15644513111874], [34.01528399351686, -84.15773259144589], [34.01569307087567, -84.15777550679013], [34.01597764526703, -84.15846215229794], [34.017240432619985, -84.1585265253143], [34.01704479073865, -84.15869818669125], [34.017791784586976, -84.15917025547787], [34.01727600382269, -84.16058646183774], [34.01747164517116, -84.16071520787045], [34.01825420605609, -84.16024313908383], [34.01796963929628, -84.15831194859311], [34.01800521019344, -84.15814028721616], [34.01782735555864, -84.15786133747861], [34.017934068384236, -84.15773259144589], [34.01763171502998, -84.15711031895444], [34.017987424746714, -84.1565095041351], [34.017489430725924, -84.15562973957822], [34.018076351943, -84.15365563374326], [34.01919682663422, -84.15429936390683], [34.020210576705615, -84.15462122898862], [34.02102868197025, -84.15498600941464], [34.021846779349474, -84.15541516285703], [34.02271377611777, -84.15578530770108], [34.02272489140348, -84.1557893310146]];
     
                                                  
    var dCoords = []
    for (var i = 0; i < pts.length; i++) {
      
      dCoords.push(new google.maps.LatLng(pts[i][0], pts[i][1]))
    }
    configureHoods();

    for (var key in hoods) {
        hood = hoods[key] 
        school = schools[hood.schoolId]
        p = google.maps.geometry.encoding.decodePath(hood.path);
        poly = new google.maps.Polygon({
	    path: p,
	    strokeColor: school.color,
	    strokeOpacity: 0.8,
	    strokeWeight: 2,
	    fillColor: school.color,
            fillOpacity: 0.35
        });
        poly.setMap(map);
        clos = function() {
          var h = hood
          var p = poly
          return function(event) {
            handleHoodClick(event, h, p);
        }}
        google.maps.event.addListener(poly, 'click', clos());
        hood_polies.push(poly)
    }
    for (var key in cities) {
        city = cities[key] 
        p = google.maps.geometry.encoding.decodePath(city.path);
        poly = new google.maps.Polygon({
	    paths: p,
	    strokeColor: "#333333",
	    strokeOpacity: 0.8,
	    strokeWeight: 2,
	    fillColor: "#333333",
            fillOpacity: 0.35
        });

        showInfoCity(null, city, dCoords);
        poly.setMap(map);
        clos = function() {
          var h = city
          var p = poly
          return function(event) {
            handleCityClick(event, h, p);
        }}
        google.maps.event.addListener(poly, 'click', clos());
        city_polies.push(poly)
    }
   
    for (var key in schools) {
        school = schools[key]
        marker = new google.maps.Marker({
             position: school.position,
             title: school.name
        });
        marker.setMap(map);
        clos = function() {
          var s = school
          var m = marker
          return function(event) {
            handleSchoolClick(event, s, m);
        }}
        google.maps.event.addListener(marker, 'click', clos());

    }

    infowindow = new google.maps.InfoWindow();

}

  function showInfoHood(event, hood, poly) {

  var contentString = "<b>" + hood.name + "</b><br />";
  //contentString += "Clicked Location: <br />" + event.latLng.lat() + "," + event.latLng.lng() + "<br />";
  contentString += "School: " + schools[hood.schoolId].name + "<br />";
  contentString += "ES: " + hood.students.es + "<br />";
  contentString += "MS: " + hood.students.ms + "<br />";
  contentString += "HS: " + hood.students.hs + "<br />";

        var encodeString = google.maps.geometry.encoding.encodePath(poly.path);
       	if (encodeString != null) {
          document.getElementById('encodedPolyline').value = encodeString;
          document.getElementById('encodedPolyline').value = poly;
          document.getElementById('encodedPolyline').value += "damn";
        } else {
          document.getElementById('encodedPolyline').value = "damn";
        }

  showInfo(event.latLng, contentString);
  }

  function showInfoSchool(event, school, marker) {
    var contentString = "<b>" + school.name + "</b><br />";
    showInfo(marker.position, contentString);
  }
  function showInfoCity(event, city, poly) {
    alert ('sup');
    var contentString = "<b>" + city.name + "</b><br />";
        var encodeString = google.maps.geometry.encoding.encodePath(poly);
       	if (encodeString != null) {
          document.getElementById('encodedPolyline').value = encodeString;
          document.getElementById('encodedPolyline').value += "damn";
        } else {
          document.getElementById('encodedPolyline').value = "damn";
        }
    //showInfo(event.latLng, contentString);
  }

  function showInfo(latLng, str) {
    infowindow.setContent(str);
    infowindow.setPosition(latLng);

    infowindow.open(map);
  } 

  function handleCityClick(event, city, poly) {
    showInfoCity(event, city, poly);
  }
  function handleHoodClick(event, hood, poly) {
    showInfoHood(event, hood, poly);
  }
  function handleSchoolClick(event, school, marker) {
    showInfoSchool(event, school, marker);
  }
  function toggleOverlays() {
    for (var i = 0; i <polies.length; i++) {
      p = polies[i];
      if (display) {
        p.setMap(null);
      } else {
        p.setMap(map);
      }
    }
    display = !display
  }
